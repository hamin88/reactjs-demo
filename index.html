
<!DOCTYPE html>
<html>
  <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  <body>
   
    <div id="mydiv"></div>

    <script type="text/babel">
 
      class Hello extends React.Component {      	  
	constructor(props) {
        	super(props);
        	this.state = {
            		ip: '',
		    	city:'',
		    	country:''
        	};
		this.handleChange();
    	}   
	 handleChange = (e) =>{ 
    		this.setState({ip: e.target.value});
		var url = 'https://ip-geolocation-ipwhois-io.p.rapidapi.com/json/';
	 	if(e.target.value){
	 		url = url +'?ip='+e.target.value;
	 	}
		fetch(url, {
			"method": "GET",
			"headers": {
				"x-rapidapi-host": "ip-geolocation-ipwhois-io.p.rapidapi.com",
				"x-rapidapi-key": "844e376f46mshe8d6f7e482560ebp14ac84jsnb3c23307283d"
			}		
		}).then(res => res.json())
      		.then(
		(result) => {
		  console.log(result); 
		  this.setState({
		    ip: result.ip,
		    city:result.city,
		    country:result.country
		  });
	        });
  	}
        render() {
	 	const {ip,city,country} = this.state;	  	   	  
          	return <div><div><label>IP Address:</label><input type="text" value={this.state.ip} onChange={this.handleChange}/></div>
		            <div><label>city:</label> <input type="text" value={this.state.city}/></div>
			    <div><label>country:</label> <input type="text" value={this.state.country}/></div>
	       </div>         
      	}
	}
      ReactDOM.render(<Hello />, document.getElementById('mydiv'));     
    </script>
  </body>
</html>
 
  
  

     



