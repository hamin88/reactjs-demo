
<!DOCTYPE html>
<html>
  <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  <body>
  
    <div id="ip"></div>	  
    <div id="mydiv"></div>

    <script type="text/babel">
class App extends React.Component {
  constructor() {
    super();
    this.state = {ip : ''}
  }
  handleChange = (e) =>{ 
    this.setState({value: e.target.value});
  }
  render() {
    return (
    <div>
        <input type="text" value={this.state.ip} onChange={this.handleChange}/>
        <div>{this.state.ip}</div>
    </div>
   )
  }
}
ReactDOM.render(<App/>, document.getElementById('ip'));

      class Hello extends React.Component {
      	  
	constructor(props) {
        	super(props);
        	this.state = {
            		ip: '3' 
        	};
    	}   
	 handleChange = (e) =>{ 
    		this.setState({ip: e.target.value});
  	}
        render() {
	 const {ip} = this.state;
	  
	 var url = 'https://ip-geolocation-ipwhois-io.p.rapidapi.com/json/';
	 if(this.state.ip){
	 	url = url +'?ip='+this.state.ip;
	 }
	 fetch(url, {
			"method": "GET",
			"headers": {
				"x-rapidapi-host": "ip-geolocation-ipwhois-io.p.rapidapi.com",
				"x-rapidapi-key": "844e376f46mshe8d6f7e482560ebp14ac84jsnb3c23307283d"
			}		
		}).then(res => res.json())
      		.then(
		(result) => {
		  console.log(result); 
		  this.setState({
		    ip: result.ip
		  });
	        });
		  
          return <input type="text" value={this.state.ip} onChange={this.handleChange}/><h1>{this.state.ip}</h1>;
        }
      }

      ReactDOM.render(<Hello />, document.getElementById('mydiv'));      
    </script>
  </body>
</html>
 
  
  

     



